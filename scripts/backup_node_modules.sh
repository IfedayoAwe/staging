#!/bin/bash

tmp_dir=${PROJECT_WORKSPACE}/helpers/tmp
node_modules=${PROJECT_WORKSPACE}/frontend/node_modules

# Copy node_modules folder to a temporary folder if it exists
# this is done to backup the node_modules folder and reduce the data usage
# of npm install operations.
[ ! -d $tmp_dir ] && mkdir $tmp_dir # create tmp_dir if it doesn't exist

if [ -d $node_modules ]; then
  echo "Backing up node_modules..."
  cp -r $node_modules "${tmp_dir}/node_modules"
else
  echo "node_modules directory not found. Skipping step..."
fi